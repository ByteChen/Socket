## 总结介绍

1. 此目录下共四个.c文件，其中**server.c**和**client.c**分别时反射服务器的服务端和客户端；**p2pser.c**和**p2pcli.c**分别是点对点聊天程序的服务端和客户端。
2. Makefile。应该能够make产生可执行程序。
3. 纯C代码，不过尽量按照Google C++ 风格写。

#### 反射服务器介绍

1. 功能：server接收来自client的消息，打印到标准输出，然后再将消息原封不动发送回去给client。
2. 要点：
   1. 使用子进程，一个子进程处理一个client连接，实现并发；

   2. 增加 **SO_REUSEADDR** 选项，允许服务器重用端口，不必等到TIME_WAIT结束

   3. 定义了一个packet消息体结构，头部是消息的长度；

      ```c
      struct packet {
      	int len;	// 消息长度
      	char buf[1024];	// buffer
      };
      ```

      ​

   4. 封装了readn() 和 writen() 函数，能够读/写指定长度的消息，结合packet消息体，解决TCP粘包问题。

   5. 使用**select( )** 优化client的I/O，避免进程被fgets（）阻塞，而无法及时响应对端的关闭连接。

#### 点对点聊天程序

1. 功能：p2pser 和 p2pcli 都可以从键盘或者套接字获取输入，然后发送给对方，实现对点对聊天。

2. 要点：

     1. 使用**信号+ kill() + signal() **实现父进程关闭时通知子进程关闭，防止出现僵尸进程

   ​